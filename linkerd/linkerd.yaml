admin:
  port: 9990

namers:
- kind: io.l5d.fs
  rootDir: /config/linkerd/disco

telemetry:
- kind: io.l5d.commonMetrics
- kind: io.l5d.recentRequests
  sampleRate: 1.0

routers:
- protocol: http
  baseDtab: |
    /srv                  => /#/io.l5d.fs;
    /reverse/nih          => /srv;
    /host                 => /$/io.buoyant.http.domainToPathPfx/reverse;
    /http/1.1/*           => /host;
  httpAccessLog: /data/linkerd/logs/access.log
  label: inst
  dstPrefix: /http
  servers:
  - port: 4140
    ip: 0.0.0.0

- protocol: thrift
  label: /host/thrift-framed
  baseDtab: |
    /host     => /#/io.l5d.fs;
    /thrift   => /host/thrift-framed;
  client:
    thriftFramed: true
    thriftProtocol: binary
  servers:
  - port: 4141
    ip: 0.0.0.0
    thriftFramed: true
    thriftProtocol: binary

- protocol: thrift
  label: /host/thrift-buffered
  baseDtab: |
    /host     => /#/io.l5d.fs;
    /thrift  => /host/thrift-buffered;
  client:
    thriftFramed: false
    thriftProtocol: compact
  servers:
  - port: 4142
    ip: 0.0.0.0
    thriftFramed: false
    thriftProtocol: compact
